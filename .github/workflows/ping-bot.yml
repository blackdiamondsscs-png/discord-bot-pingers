name: ü§ñ Discord Bot Pinger 24/7

on:
  schedule:
    # –ü–†–ê–í–ò–õ–¨–ù–´–ô —Ñ–æ—Ä–º–∞—Ç cron (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
    - cron: '*/5 * * * *'
  
  # –†–∞–∑—Ä–µ—à–∏—Ç—å —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
  workflow_dispatch:

jobs:
  ping-bot:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
    - name: üïê –ü–æ–∫–∞–∂–∏ –≤—Ä–µ–º—è
      run: |
        echo "üïê –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ GitHub:"
        echo "–î–∞—Ç–∞: $(date)"
        echo "Unix –≤—Ä–µ–º—è: $(date +%s)"
        echo ""
        echo "‚è∞ –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫ –ø–æ cron —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç"
        
    - name: üöÄ –ü–∏–Ω–≥–æ–≤–∞—Ç—å Discord –±–æ—Ç–∞
      run: |
        echo "=== –ó–ê–ü–£–°–ö –ü–ò–ù–ì–ï–†–ê ==="
        echo "üïê –ù–∞—á–∞–ª–æ: $(date '+%Y-%m-%d %H:%M:%S')"
        echo ""
        
        # === –¢–í–û–ô URL ===
        BOT_URL="https://Python-BlackDiamond6.repl.co"
        
        echo "üéØ –¶–µ–ª—å: $BOT_URL"
        echo ""
        
        # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–∏–Ω–≥–∞
        ping_url() {
          local url="$1"
          local name="$2"
          
          echo "üîç $name: $url"
          START=$(date +%s)
          HTTP_CODE=$(curl -s -o /dev/null -w "%{http_code}" --max-time 15 "$url")
          END=$(date +%s)
          TIME=$((END - START))
          
          if [ "$HTTP_CODE" = "200" ]; then
            echo "‚úÖ –£—Å–ø–µ—Ö! –°—Ç–∞—Ç—É—Å: $HTTP_CODE, –í—Ä–µ–º—è: ${TIME}—Å"
            RESPONSE=$(curl -s --max-time 10 "$url")
            echo "   –û—Ç–≤–µ—Ç: $RESPONSE"
            return 0
          else
            echo "‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞! –°—Ç–∞—Ç—É—Å: $HTTP_CODE, –í—Ä–µ–º—è: ${TIME}—Å"
            return 1
          fi
        }
        
        # –ü–∏–Ω–≥—É–µ–º
        echo "üì° –ù–∞—á–∏–Ω–∞—é –ø—Ä–æ–≤–µ—Ä–∫–∏..."
        echo ""
        
        ping_url "$BOT_URL" "–û—Å–Ω–æ–≤–Ω–æ–π URL"
        echo ""
        ping_url "$BOT_URL/ping" "–≠–Ω–¥–ø–æ–∏–Ω—Ç /ping"
        echo ""
        ping_url "$BOT_URL/health" "–≠–Ω–¥–ø–æ–∏–Ω—Ç /health"
        
        echo ""
        echo "=== –ó–ê–í–ï–†–®–ï–ù–û ==="
        echo "‚úÖ Workflow –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ"
        echo "üïê –ö–æ–Ω–µ—Ü: $(date '+%H:%M:%S')"
        
    - name: üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
      if: always()
      run: |
        echo "üìÖ GitHub Actions ID: ${{ github.run_id }}"
        echo "üî¢ –ù–æ–º–µ—Ä –∑–∞–ø—É—Å–∫–∞: ${{ github.run_number }}"
        echo "üéØ Event: ${{ github.event_name }}"
        echo "üåê –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 24/7"
