name: ü§ñ Discord Bot Pinger 24/7

on:
  schedule:
    - cron: "*/5 * * * *"  # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
  workflow_dispatch:

jobs:
  ping-bot:
    runs-on: ubuntu-latest
    
    steps:
    - name: üöÄ –ü–∏–Ω–≥–æ–≤–∞—Ç—å Discord –±–æ—Ç–∞
      run: |
        echo "=== –ó–ê–ü–£–°–ö –ê–í–¢–û–ù–û–ú–ù–û–ì–û –ü–ò–ù–ì–ï–†–ê ==="
        echo "üïê –í—Ä–µ–º—è: $(date '+%H:%M:%S')"
        
        # === –ò–°–ü–û–õ–¨–ó–£–ô –≠–¢–û–¢ URL ===
        BOT_URL="https://Python-BlackDiamond6.repl.co"
        
        echo "üéØ –¶–µ–ª—å: $BOT_URL"
        echo ""
        
        # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–∏–Ω–≥–∞
        ping_endpoint() {
          local url="$1"
          echo "üîç –ü—Ä–æ–≤–µ—Ä—è—é: $url"
          
          HTTP_CODE=$(curl -s -o /dev/null -w "%{http_code}" --max-time 15 "$url")
          
          if [ "$HTTP_CODE" = "200" ]; then
            echo "‚úÖ –£—Å–ø–µ—Ö! –°—Ç–∞—Ç—É—Å: $HTTP_CODE"
            
            # –ü–æ–∫–∞–∂–µ–º —á—Ç–æ –≤–µ—Ä–Ω—É–ª –±–æ—Ç
            RESPONSE=$(curl -s --max-time 15 "$url")
            echo "   –û—Ç–≤–µ—Ç: $RESPONSE"
            return 0
          else
            echo "‚ö†Ô∏è –ö–æ–¥: $HTTP_CODE"
            return 1
          fi
        }
        
        # –ü–∏–Ω–≥—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ endpoints
        success_count=0
        
        echo "üì° –¢–µ—Å—Ç–∏—Ä—É—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."
        ping_endpoint "$BOT_URL" && success_count=$((success_count + 1))
        echo ""
        ping_endpoint "$BOT_URL/health" && success_count=$((success_count + 1))
        echo ""
        ping_endpoint "$BOT_URL/ping" && success_count=$((success_count + 1))
        echo ""
        ping_endpoint "$BOT_URL/status" && success_count=$((success_count + 1))
        
        echo ""
        echo "=== –†–ï–ó–£–õ–¨–¢–ê–¢–´ ==="
        echo "‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫: $success_count –∏–∑ 4"
        
        if [ $success_count -eq 0 ]; then
          echo "‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç!"
          echo "üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:"
          echo "   1. –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ Replit?"
          echo "   2. URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π? –ü–æ–ø—Ä–æ–±—É–π –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ"
          echo "   3. –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å Replit"
        else
          echo "üéâ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç! GitHub –±—É–¥–µ—Ç –ø–∏–Ω–≥–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç"
        fi
        
        echo ""
        echo "‚è∞ –°–ª–µ–¥—É—é—â–∏–π –ø–∏–Ω–≥ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç"
        echo "üåê GitHub Actions —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7"
        
    - name: üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
      if: always()
      run: |
        echo "üìÖ –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: $(date '+%Y-%m-%d %H:%M:%S')"
        echo "‚úÖ Workflow –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ"
